C51 COMPILER V7.50   独立按键                                                              08/18/2011 11:41:46 PAGE 1   


C51 COMPILER V7.50, COMPILATION OF MODULE 独立按键
OBJECT MODULE PLACED IN 独立按键.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE 独立按键.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /********************************************************************
   2          * 文件名  ： 独立按键.c
   3          * 描述    :  该程序实现独立按键去控制 LED灯 的亮灭，并讲诉了对按键的处理方法。
   4                                   独立按键相应的IO口平时为高电平，一旦按键按下，单片机便检测到低电平。
   5                                   按下P3.2，P0.0口对应的LED两灭交替变化。
   6                                   按下P3.2，P0.0口对应的LED两灭交替变化。
   7                                   按下P3.2，P0.0口对应的LED两灭交替变化。
   8          * 创建人  ： 东流，2009年8月27日
   9          * 版本号  ： 1.0
  10          ***********************************************************************/
  11          #include<reg52.h>
  12          #define uchar unsigned char
  13          #define uint  unsigned int
  14          
  15          sbit KEY1 = P3^2;    
  16          sbit KEY2 = P3^3;
  17          sbit KEY3 = P3^4;
  18          
  19          sbit LED1 = P0^0;
  20          sbit LED2 = P0^1;
  21          sbit LED3 = P0^2;
  22          
  23          /********************************************************************
  24          * 名称 : Delay()
  25          * 功能 : 延时,延时时间为 10ms * del
  26          * 输入 : del
  27          * 输出 : 无
  28          ***********************************************************************/
  29          void Delay(uint del)
  30          {
  31   1              uint i,j;
  32   1              for(i=0; i<del; i++)
  33   1              for(j=0; j<1827; j++)   
  34   1              ;
  35   1      }
  36          
  37          /********************************************************************
  38          * 名称 : Delay()
  39          * 功能 : 实现按键功能，当按键按下时，相应的LED亮灭交替
  40          * 输入 : 无
  41          * 输出 : 无
  42          ***********************************************************************/
  43          void KEY()
  44          {
  45   1              if(KEY1==0 || KEY2==0 || KEY3==0)       
  46   1              {
  47   2                      Delay(2);               //20毫秒软件防抖
  48   2                      if(KEY1==0 || KEY2==0 || KEY3==0)
  49   2                      {
  50   3                              if(KEY1 == 0)
  51   3                              { 
  52   4                                      LED1 = !LED1;           //LED显示取反
  53   4                              }
  54   3                              else if(KEY2 == 0)
  55   3                              {                       
C51 COMPILER V7.50   独立按键                                                              08/18/2011 11:41:46 PAGE 2   

  56   4                                      LED2 = !LED2;
  57   4                              }
  58   3                              else 
  59   3                              {                       
  60   4                                      LED3 = !LED3;
  61   4                              }
  62   3                      }
  63   2                      Delay(50);                      //延时0.5秒再进行下次按键的检测
  64   2              }       
  65   1      }
  66          /********************************************************************
  67          * 名称 : Main()
  68          * 功能 : 实现按键控制LED的亮灭
  69          * 输入 : 无
  70          * 输出 : 无
  71          ***********************************************************************/
  72          void Main(void)
  73          {
  74   1              while(1)
  75   1              {
  76   2                       KEY();
  77   2              }
  78   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     86    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
