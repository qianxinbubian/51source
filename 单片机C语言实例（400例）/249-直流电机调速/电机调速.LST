C51 COMPILER V7.06   _ç»__÷ËÙ                                                              05/13/2009 13:40:38 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE _ç»__÷ËÙ
OBJECT MODULE PLACED IN µç»úµ÷ËÙ.OBJ
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE µç»úµ÷ËÙ.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          
   2          /*-----------------------------------------------
   3            Ãû³Æ£ºÖ±Á÷µç»úµ÷ËÙ
   4            ¹«Ë¾£ºÉÏº£ºÆëàµç×Ó¿Æ¼¼ÓÐÏÞ¹«Ë¾
   5            ÍøÕ¾£ºwww.doflye.cn
   6            ±àÐ´£ºÊ¦·Ã
   7            ÈÕÆÚ£º2009.5
   8            ÐÞ¸Ä£ºÎÞ
   9            ÄÚÈÝ£º1¡¢Ñ§Ï°Ä¿µÄ£ºÀûÓÃ¶¨Ê±Æ÷²úÉúPWM£¬ÁË½âÔ­ÀíºÍÊ¹ÓÃ·½·¨
  10                  2¡¢Ó²¼þÒªÇó£ºÖ±Á÷µç»ú ¶¨Ê±Æ÷
  11                  3¡¢ÊÔÑéÏÖÏó£º°´¼üµ÷ËÙ£¬PWM²¿·ÖÏÔÊ¾ËÙ¶ÈµµÎ»£¬µç»ú¸ù¾ÝµµÎ»µ÷½ÚËÙ¶È Õâ¸öÐèÒª°Ñµç»úÇý¶¯ÊäÈë¶ËºÍPWM¶ËÁ¬
             -½ÓÆðÀ´
  12          ------------------------------------------------*/
  13          #include<reg52.h>     //°üº¬Í·ÎÄ¼þ£¬Ò»°ãÇé¿ö²»ÐèÒª¸Ä¶¯£¬Í·ÎÄ¼þ°üº¬ÌØÊâ¹¦ÄÜ¼Ä´æÆ÷µÄ¶¨Òå
  14          
  15          sbit KEY1 = P3^1;     //¶¨Òåµ÷ËÙ°´¼ü
  16          sbit PWM = P1^5;      //¶¨Òåµ÷ËÙ¶Ë¿Ú
  17          unsigned char CYCLE;  //¶¨ÒåÖÜÆÚ ¸ÃÊý×ÖX»ù×¼¶¨Ê±Ê±¼ä Èç¹ûÊÇ10 ÔòÖÜÆÚÊÇ10 x 0.1ms
  18          unsigned char PWM_ON ;//¶¨Òå¸ßµçÆ½Ê±¼ä
  19          /******************************************************************/
  20          /*                    ÑÓÊ±º¯Êý                                    */
  21          /******************************************************************/
  22          void delay(unsigned int cnt)
  23          {
  24   1       while(--cnt);
  25   1      }
  26          /******************************************************************/
  27          /*                    Ö÷º¯Êý                                      */
  28          /******************************************************************/
  29          main()
  30          {
  31   1      unsigned char PWM_Num;//¶¨ÒåµµÎ»
  32   1      TMOD |=0x01;//¶¨Ê±Æ÷ÉèÖÃ 1ms in 12M crystal
  33   1      TH0=(65536-1000)/256; 
  34   1      TL0=(65536-1000)%256;//¶¨Ê±1mS 
  35   1      IE= 0x82;  //´ò¿ªÖÐ¶Ï
  36   1      TR0=1;
  37   1      
  38   1      CYCLE = 10;// Ê±¼ä¿ÉÒÔµ÷Õû Õâ¸öÊÇ10²½µ÷Õû ÖÜÆÚ10ms 8Î»PWM¾ÍÊÇ256²½
  39   1      while(1)
  40   1        {
  41   2      if(!KEY1)
  42   2        {
  43   3         delay(10000);
  44   3         if(!KEY1)
  45   3           {
  46   4            PWM_Num++;
  47   4                if(PWM_Num==4)PWM_Num=0;
  48   4             switch(PWM_Num){
  49   5             case 0:P0=0x06;PWM_ON=0;break;//¸ßµçÆ½Ê±³¤ 
  50   5             case 1:P0=0x5B;PWM_ON=4;break;
  51   5             case 2:P0=0x4F;PWM_ON=6;break;
  52   5             case 3:P0=0x66;PWM_ON=8;break;
  53   5             default:break;
  54   5           }
C51 COMPILER V7.06   _ç»__÷ËÙ                                                              05/13/2009 13:40:38 PAGE 2   

  55   4         }
  56   3        }
  57   2       }
  58   1      
  59   1      }
  60          /******************************************************************/
  61          /*                    ¶¨Ê±Æ÷ÖÐ¶Ïº¯Êý                              */
  62          /******************************************************************/
  63          void tim(void) interrupt 1 using 1
  64          {
  65   1      static unsigned char count; //
  66   1      TH0=(65536-1000)/256; 
  67   1      TL0=(65536-1000)%256;//¶¨Ê±1mS 
  68   1      
  69   1      if (count==PWM_ON)
  70   1          {
  71   2           PWM = 1;        //µÆÃð 
  72   2          }
  73   1        count++;
  74   1      if(count == CYCLE)
  75   1          {
  76   2          count=0;
  77   2              if(PWM_ON!=0)    //Èç¹û×óÓÒÊ±¼äÊÇ0 ±£³ÖÔ­À´×´Ì¬
  78   2                 PWM = 0;      //µÆÁÁ
  79   2      
  80   2          }
  81   1      
  82   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    130    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
