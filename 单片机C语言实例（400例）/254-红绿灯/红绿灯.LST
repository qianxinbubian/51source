C51 COMPILER V7.06   _ìÂÌ_Æ                                                                05/13/2009 14:50:17 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE _ìÂÌ_Æ
OBJECT MODULE PLACED IN ºìÂÌµÆ.OBJ
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE ºìÂÌµÆ.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          /*-----------------------------------------------
   2            Ãû³Æ£ººìÂÌµÆ
   3            ¹«Ë¾£ºÉÏº£ºÆëàµç×Ó¿Æ¼¼ÓÐÏÞ¹«Ë¾
   4            ÍøÕ¾£ºwww.doflye.cn
   5            ±àÐ´£ºÊ¦·Ã
   6            ÈÕÆÚ£º2009.5
   7            ÐÞ¸Ä£ºÎÞ
   8            ÄÚÈÝ£º1¡¢³ÌÐòÄ¿µÄ£ºÊ¹ÓÃ¶¨Ê±Æ÷Ñ§Ï° µ¹¼ÆÊ± ºìÂÌµÆÔ­Àí Ö÷Òª³ÌÐòºÍµ¹¼ÆÊ±Ò»Ñù
   9                  2¡¢Ó²¼þÒªÇó£ºÊýÂë¹Ü¡¢¾§Õñ12M
  10          ------------------------------------------------*/
  11          #include<reg52.h>     //°üº¬Í·ÎÄ¼þ£¬Ò»°ãÇé¿ö²»ÐèÒª¸Ä¶¯£¬Í·ÎÄ¼þ°üº¬ÌØÊâ¹¦ÄÜ¼Ä´æÆ÷µÄ¶¨Òå
  12          
  13          bit red,green,yellow,turnred;//¶¨ÒåºìÂÌ»ÆµÆ±êÖ¾Î»
  14          
  15          code unsigned char tab[]=
  16                                  {0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f}; 
  17                                                  //¹²ÒõÊýÂë¹Ü 0-9 
  18          
  19          unsigned char Dis_Shiwei;//¶¨ÒåÊ®Î»
  20          unsigned char Dis_Gewei; //¶¨Òå¸öÎ»
  21          /******************************************************************/
  22          /*                    ÑÓÊ±º¯Êý                                    */
  23          /******************************************************************/
  24          void delay(unsigned int cnt)
  25          {
  26   1       while(--cnt);
  27   1      }
  28          /******************************************************************/
  29          /*                    Ö÷º¯Êý                                      */
  30          /******************************************************************/
  31          main()
  32          {
  33   1      TMOD |=0x01;//¶¨Ê±Æ÷ÉèÖÃ 10ms in 12M crystal
  34   1      TH0=0xd8;
  35   1      TL0=0xf0;
  36   1      IE= 0x82;   //´ò¿ªÖÐ¶Ï
  37   1      TR0=1;
  38   1      
  39   1      P1=0xfc;    //ºìµÆÁÁ
  40   1      red =1;
  41   1      while(1)
  42   1        {
  43   2        P0=Dis_Shiwei;//ÏÔÊ¾Ê®Î»
  44   2        P2=0;
  45   2        delay(300);   //¶ÌÔÝÑÓÊ±
  46   2        P0=Dis_Gewei; //ÏÔÊ¾¸öÎ»
  47   2        P2=1;
  48   2        delay(300);
  49   2        }
  50   1      
  51   1      }
  52          /******************************************************************/
  53          /*                    ¶¨Ê±Æ÷ÖÐ¶Ïº¯Êý                              */
  54          /******************************************************************/
  55          void tim(void) interrupt 1 using 1
C51 COMPILER V7.06   _ìÂÌ_Æ                                                                05/13/2009 14:50:17 PAGE 2   

  56          {
  57   1      static unsigned char second=60,count; //³õÖµ99
  58   1      
  59   1      TH0=0xd8;//ÖØÐÂ¸³Öµ
  60   1      TL0=0xf0;
  61   1      count++;
  62   1      if (count==100)
  63   1          {
  64   2          count=0;
  65   2          second--;//Ãë¼õ1
  66   2              if(second==0)
  67   2                 {  //ÕâÀïÌí¼Ó¶¨Ê±µ½0µÄ´úÂë £¬¿ÉÒÔÊÇµÆµçÂ·£¬¼ÌµçÆ÷ÎüºÏµÈ£¬»òÕßÖ´ÐÐÒ»¸ö³ÌÐò
  68   3             if(red)
  69   3                   {
  70   4                        red=0;yellow=1;
  71   4                second=5;
  72   4                        P1=0xF3;//»ÆµÆÁÁ5Ãë
  73   4                       }
  74   3                 else if(yellow && !turnred)
  75   3                   {
  76   4                        yellow=0;green=1;
  77   4                second=50;
  78   4                        P1=0xCF;//ÂÌµÆÁÁ50Ãë
  79   4                       }
  80   3                 else if(green)
  81   3                   {
  82   4                       yellow=1;green=0;
  83   4               second=5;
  84   4                       P1=0xF3;//»ÆµÆÁÁ5Ãë
  85   4                       turnred=1;
  86   4                       }
  87   3             else if(yellow && turnred)
  88   3                   {
  89   4                   red=1;yellow=0;
  90   4                       P1=0xFC;//ºìµÆÁÁ60Ãë
  91   4               second=60;
  92   4                       turnred=0;
  93   4                       }
  94   3      
  95   3                 }
  96   2              Dis_Shiwei=tab[second/10];//Ê®Î»ÏÔÊ¾Öµ´¦Àí
  97   2          Dis_Gewei=tab[second%10]; //¸öÎ»ÏÔÊ¾´¦Àí
  98   2          
  99   2          }
 100   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    191    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =      4    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
