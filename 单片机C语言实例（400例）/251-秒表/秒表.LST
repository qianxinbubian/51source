C51 COMPILER V7.06   √Î_Ì                                                                  05/13/2009 13:45:30 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE √Î_Ì
OBJECT MODULE PLACED IN √Î±Ì.OBJ
COMPILER INVOKED BY: d:\Keil\C51\BIN\C51.EXE √Î±Ì.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          /*-----------------------------------------------
   2            √˚≥∆£∫√Î±Ì
   3            π´Àæ£∫…œ∫£∫∆Î‡µÁ◊”ø∆ºº”–œﬁπ´Àæ
   4            Õ¯’æ£∫www.doflye.cn
   5            ±‡–¥£∫ ¶∑√
   6            »’∆⁄£∫2009.5
   7            –ﬁ∏ƒ£∫Œﬁ
   8            ƒ⁄»›£∫1°¢≥Ã–Úƒøµƒ£∫ π”√∂® ±∆˜—ßœ∞√Î±Ìº∆ ±£¨÷–∂œ0øÿ÷∆◊ﬂ±Ì£¨÷–∂œ1øÿ÷∆«Â¡„ 
   9                  2°¢”≤º˛“™«Û£∫ ˝¬Îπ‹°¢æß’Ò12M
  10          
  11          ------------------------------------------------*/
  12          #include<reg52.h>     //∞¸∫¨Õ∑Œƒº˛£¨“ª∞„«Èøˆ≤ª–Ë“™∏ƒ∂Ø£¨Õ∑Œƒº˛∞¸∫¨Ãÿ ‚π¶ƒ‹ºƒ¥Ê∆˜µƒ∂®“Â
  13          
  14          code unsigned char tab[]=
  15                                  {0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f}; 
  16                                  //π≤“ı ˝¬Îπ‹ 0-9 
  17          
  18          unsigned char Dis_Shiwei;  //∂®“Â ÆŒª
  19          unsigned char Dis_Gewei;   //∂®“Â∏ˆŒª
  20          unsigned char S_Dis_Shiwei;//∂®“Â√Î ÆŒª
  21          unsigned char S_Dis_Gewei; //∂®“Â√Î∏ˆŒª
  22          unsigned char second,msecond;
  23          /******************************************************************/
  24          /*                    ∫Ø ˝…˘√˜                                   */
  25          /******************************************************************/
  26          void CLR(void);
  27          /******************************************************************/
  28          /*                    —” ±∫Ø ˝                                    */
  29          /******************************************************************/
  30          void delay(unsigned int cnt)
  31          {
  32   1       while(--cnt);
  33   1      }
  34          /******************************************************************/
  35          /*                    ÷˜∫Ø ˝                                      */
  36          /******************************************************************/
  37          main()
  38          {
  39   1      EX0=1;//Õ‚≤ø÷–∂œ0…Ë÷√
  40   1      IT0=1;
  41   1      
  42   1      EX1=1;//Õ‚≤ø÷–∂œ1…Ë÷√
  43   1      IT1=1;
  44   1      
  45   1      TMOD |=0x01;//∂® ±∆˜…Ë÷√ 10ms in 12M crystal
  46   1      TH0=0xd8;
  47   1      TL0=0xf0;
  48   1      ET0=1;  //¥Úø™÷–∂œ
  49   1      TR0=0;
  50   1      
  51   1      EA=1;
  52   1      CLR();
  53   1      while(1)
  54   1        {
  55   2        P0=S_Dis_Shiwei;//œ‘ æ√Î ÆŒª
C51 COMPILER V7.06   √Î_Ì                                                                  05/13/2009 13:45:30 PAGE 2   

  56   2        P2=1;
  57   2        delay(300);     //∂Ã‘›—” ±
  58   2        P0=S_Dis_Gewei; //œ‘ æ√Î∏ˆŒª
  59   2        P2=2;
  60   2        delay(300);
  61   2        P0=0x40;        //œ‘ æ√Î∏ˆŒª
  62   2        P2=3;
  63   2        delay(300);
  64   2        P0=Dis_Shiwei;  //œ‘ æ ÆŒª
  65   2        P2=4;
  66   2        delay(300);     //∂Ã‘›—” ±
  67   2        P0=Dis_Gewei;   //œ‘ æ∏ˆŒª
  68   2        P2=5;
  69   2        delay(300);
  70   2        }
  71   1      }
  72          /******************************************************************/
  73          /*                    ∂® ±∆˜÷–∂œ∫Ø ˝                              */
  74          /******************************************************************/
  75          void tim(void) interrupt 1 using 1
  76          {
  77   1      
  78   1      TH0=0xd8;//÷ÿ–¬∏≥÷µ
  79   1      TL0=0xf0;
  80   1      msecond++;
  81   1      if (msecond==100)
  82   1          {
  83   2          msecond=0;
  84   2          second++;//√Îº”1
  85   2              if(second==100)
  86   2                 second=0;
  87   2              S_Dis_Shiwei=tab[second/10];// ÆŒªœ‘ æ÷µ¥¶¿Ì
  88   2          S_Dis_Gewei=tab[second%10]; //∏ˆŒªœ‘ æ¥¶¿Ì
  89   2      
  90   2              }
  91   1          Dis_Shiwei=tab[msecond/10];// ÆŒªœ‘ æ÷µ¥¶¿Ì
  92   1          Dis_Gewei=tab[msecond%10]; //∏ˆŒªœ‘ æ¥¶¿Ì
  93   1      
  94   1      }
  95          /******************************************************************/
  96          /*                    Õ‚≤ø÷–∂œ∫Ø ˝                                */
  97          /******************************************************************/
  98          void ISR_INT0(void) interrupt 0 using 1
  99          {
 100   1       TR0=!TR0; //¿˚”√Õ‚≤ø÷–∂œ¥Úø™∫Õπÿ±’∂® ±∆˜0 ”√”⁄ø™ º∫ÕÕ£÷πº∆ ±
 101   1      
 102   1      }
 103          void ISR_INT1(void) interrupt 2 using 1
 104          {
 105   1      if(TR0==0)//Õ£÷π ±≤≈ø…“‘«Â¡„
 106   1         CLR();
 107   1      }
 108          
 109          void CLR(void)
 110          {
 111   1       second=0; //¿˚”√Õ‚≤ø÷–∂œ«Â¡„
 112   1       msecond=0;
 113   1       Dis_Shiwei=tab[msecond/10];// ÆŒªœ‘ æ÷µ¥¶¿Ì
 114   1       Dis_Gewei=tab[msecond%10]; //∏ˆŒªœ‘ æ¥¶¿Ì
 115   1       S_Dis_Shiwei=tab[second/10];// ÆŒªœ‘ æ÷µ¥¶¿Ì
 116   1       S_Dis_Gewei=tab[second%10]; //∏ˆŒªœ‘ æ¥¶¿Ì
 117   1      }
C51 COMPILER V7.06   √Î_Ì                                                                  05/13/2009 13:45:30 PAGE 3   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    262    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      6    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
